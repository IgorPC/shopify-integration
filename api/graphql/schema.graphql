type Query {
    "List all products using ProductService"
    allProducts(
        perPage: Int = 10
        page: Int = 1
    ): PaginatedProducts @field(resolver: "App\\GraphQL\\Queries\\ProductQuery@all")

    "Get a single product using ProductService"
    product(id: String!): Product @field(resolver: "App\\GraphQL\\Queries\\ProductQuery@find")

    "Sync All Products from shopify to the DB using ProductService"
    syncAll: SyncResponse @field(resolver: "App\\GraphQL\\Queries\\ProductQuery@syncAll")

    "Sync a product by id from shopify to the DB using ProductService"
    syncOne(id: String!): SyncResponse @field(resolver: "App\\GraphQL\\Queries\\ProductQuery@syncOne")

    "Sync a product from the DB to Shopify using ProductService"
    syncOneFromLocal(id: String!): CreatedOrUpdatedResponse @field(resolver: "App\\GraphQL\\Queries\\ProductQuery@syncLocalProductToShopify")
}

type Mutation {
    "Sync many products from the DB to Shopify using ProductService"
    bulkSyncToShopify(productIds: [String!]!): BulkSyncResponse
    @field(resolver: "App\\GraphQL\\Mutations\\ProductMutation@bulkSync")

    "Delete a product completely from shopify and DB"
    deleteProduct(id: String!): DeleteResponse
    @field(resolver: "App\\GraphQL\\Mutations\\ProductMutation@deleteProduct")

    "Delete a product from DB"
    deleteLocalProduct(id: String!): DeleteResponse
    @field(resolver: "App\\GraphQL\\Mutations\\ProductMutation@deleteLocalProduct")

    "Create a new product"
    createProduct(input: CreateProductInput! @spread): CreatedOrUpdatedResponse
    @field(resolver: "App\\GraphQL\\Mutations\\ProductMutation@create")

    "Update a product by id"
    updateProduct(input: UpdateProductInput! @spread): CreatedOrUpdatedResponse
    @field(resolver: "App\\GraphQL\\Mutations\\ProductMutation@update")
}

"Mapped response for object ProductDTO"
type Product {
    id: ID!
    title: String!
    description: String!
    price: Float!
    inventoryQuantity: Int!
}

"Mapped response object for PaginatedProductListResponseDTO"
type PaginatedProducts {
    products: [Product!]!
    currentPage: Int!
    totalPages: Int!
    perPage: Int!
    totalProducts: Int!
    hasNextPage: Boolean!
    hasPreviousPage: Boolean!
}

"Mapped response object for SyncProductResponseDTO"
type SyncResponse {
    message: String!
    syncCount: Int!
    missingProducts: [Product!]!
}

"Mapped response object for CreateOrUpdateProductResponseDTO"
type CreatedOrUpdatedResponse {
    message: String!
    product: Product
}

"Mapped response object for SyncProductResponseDTO adapted for bulk sync"
type BulkSyncResponse {
    message: String!
    syncCount: Int!
    failedIds: [String]
}

"Mapped response deleting Products"
type DeleteResponse {
    status: Boolean!
    message: String
}

"Mapped input from Create Product"
input CreateProductInput {
    title: String!
    price: Float!
    description: String!
    quantity: Int!
}

"Mapped input from Update Product"
input UpdateProductInput {
    id: String!
    title: String!
    price: Float!
    description: String!
}
